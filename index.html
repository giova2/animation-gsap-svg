<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GSAP and SVG animation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/CustomEase.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body> 
    <div class="container">
      <svg height="500" width="500" > 
        <g id="groupT">  
          <use xlink:href="#animationT" overflow="visible"/>
        </g>
        <g id="group1">
          <use xlink:href="#animation1" overflow="visible"/>
        </g>
        <g id="group2">
          <use xlink:href="#animation2" overflow="visible"/>
        </g>
      </svg>
    </div>
    <button id="play" style="position:absolute;top:0;left:0;z-index: 1;">Play</button>
    <svg height="500" width="500" >
      <defs>
        <g id="animationT" >
          <!-- transition circle         -->
          <circle id="transitionShape" class="my-fill" cx="250" cy="250" r="25" 
          />
          <circle id="transitionShapeBase" class="shape" cx="250" cy="250" r="25" 
          />          
        </g>  

        <g id="animation1" >
          
          
          <!-- 6th shape  -->
          <path id="sixthShape" class="my-fill" 
            d="M 335 250 c 8.688 14.821 13.669 32.079 13.669 50.5 c 0 55.228 -44.772 100 -100 100 c -55.2285 0 -100 -44.772 -100 -100 c 0 -18.421 4.9809 -35.679 13.6694 -50.5 c -8.6885 -14.821 -13.6694 -32.079 -13.6694 -50.5 c 0 -55.2285 44.7715 -100 100 -100 c 55.228 0 100 44.7715 100 100 c 0 18.421 -4.981 35.679 -13.669 50.5 Z" 
            />  
          
          <!-- 5th shape  -->
          <path id="fifthShape" class="my-fill"
            d="M 250 335 c -14.821 8.688 -32.079 13.669 -50.5 13.669 c -55.2285 0 -100 -44.772 -100 -100 c 0 -55.2285 44.7715 -100 100 -100 c 18.421 0 35.679 4.9809 50.5 13.6694 c 14.821 -8.6885 32.079 -13.6694 50.5 -13.6694 c 55.228 0 100 44.7715 100 100 c 0 55.228 -44.772 100 -100 100 c -18.421 0 -35.679 -4.981 -50.5 -13.669 Z" 
            />
          
          <!-- 4th shape  -->
          <path id="fourthShape" class="my-fill" 
              d="M 320 250 c 7.212 12.31 11.346 26.644 11.346 41.944 c 0 45.87 -37.16 83.056 -83 83.056 c -45.8396 0 -83 -37.186 -83 -83.056 c 0 -15.3 4.1341 -29.634 11.3456 -41.944 c -7.2114 -12.31 -11.3456 -26.6436 -11.3456 -41.9435 c 0 -45.8709 37.1604 -83.0565 83 -83.0565 c 45.84 0 83 37.1856 83 83.0565 c 0 15.2999 -4.134 29.6335 -11.346 41.9435 Z" 
              />
          
          
          <!-- 3rd shape  -->
          <path id="thirdShape" class="my-fill"
          d="M 250 320 c -12.31 7.212 -26.6436 11.346 -41.9435 11.346 c -45.8708 0 -83.0565 -37.16 -83.0565 -83 c 0 -45.8396 37.1857 -83 83.0565 -83 c 15.2999 0 29.6335 4.1341 41.9435 11.3456 c 12.31 -7.2114 26.644 -11.3456 41.944 -11.3456 c 45.87 0 83.056 37.1604 83.056 83 c 0 45.84 -37.186 83 -83.056 83 c -15.3 0 -29.634 -4.134 -41.944 -11.346 Z" 
          />
          
          <!-- 2nd shape -->
          <path id="secondShape"  class="my-fill"
            d="M 300 200 a 50 50 0 1 0 -100 0 a 50 50 0 1 0 0 100 a 50 50 0 1 0 100 0 a 50 50 0 1 0 0 -100" 
            />
          
          
          <!-- first circle -->
          <circle id="firstShape" class="my-fill" cx="250" cy="250" r="50" />
        </g>
        <g id="animation2">
          
          <!-- 6th shape  -->
          <path id="sixthShapeBase" class="shape" 
            d="M 335 250 c 8.688 14.821 13.669 32.079 13.669 50.5 c 0 55.228 -44.772 100 -100 100 c -55.2285 0 -100 -44.772 -100 -100 c 0 -18.421 4.9809 -35.679 13.6694 -50.5 c -8.6885 -14.821 -13.6694 -32.079 -13.6694 -50.5 c 0 -55.2285 44.7715 -100 100 -100 c 55.228 0 100 44.7715 100 100 c 0 18.421 -4.981 35.679 -13.669 50.5 Z" 
            >
          </path>  
          <!-- 5th shape  -->
          <path id="fifthShapeBase" class="shape"
            d="M 250 335 c -14.821 8.688 -32.079 13.669 -50.5 13.669 c -55.2285 0 -100 -44.772 -100 -100 c 0 -55.2285 44.7715 -100 100 -100 c 18.421 0 35.679 4.9809 50.5 13.6694 c 14.821 -8.6885 32.079 -13.6694 50.5 -13.6694 c 55.228 0 100 44.7715 100 100 c 0 55.228 -44.772 100 -100 100 c -18.421 0 -35.679 -4.981 -50.5 -13.669 Z" 
            />
          <!-- 4th shape  -->
          <path id="fourthShapeBase" class="shape" 
            d="M 320 250 c 7.212 12.31 11.346 26.644 11.346 41.944 c 0 45.87 -37.16 83.056 -83 83.056 c -45.8396 0 -83 -37.186 -83 -83.056 c 0 -15.3 4.1341 -29.634 11.3456 -41.944 c -7.2114 -12.31 -11.3456 -26.6436 -11.3456 -41.9435 c 0 -45.8709 37.1604 -83.0565 83 -83.0565 c 45.84 0 83 37.1856 83 83.0565 c 0 15.2999 -4.134 29.6335 -11.346 41.9435 Z" 
            >
          </path>
          <!-- 3rd shape  -->
          <path id="thirdShapeBase" class="shape" 
            d="M 250 320 c -12.31 7.212 -26.6436 11.346 -41.9435 11.346 c -45.8708 0 -83.0565 -37.16 -83.0565 -83 c 0 -45.8396 37.1857 -83 83.0565 -83 c 15.2999 0 29.6335 4.1341 41.9435 11.3456 c 12.31 -7.2114 26.644 -11.3456 41.944 -11.3456 c 45.87 0 83.056 37.1604 83.056 83 c 0 45.84 -37.186 83 -83.056 83 c -15.3 0 -29.634 -4.134 -41.944 -11.346 Z" 
            />
          <!-- 2nd shape -->
          <path id="secondShapeBase" class="shape" 
            d="M 300 200 a 50 50 0 1 0 -100 0 a 50 50 0 1 0 0 100 a 50 50 0 1 0 100 0 a 50 50 0 1 0 0 -100" 
            >
          </path>
          <!-- first circle -->
          <circle id="firstShapeBase" class="shape" cx="250" cy="250" r="50" 
            >
          </circle>
        </g>
        
        <linearGradient id="myHorizontalGradient" x1="0%" y1="0%" x2="0%" y2="100%" >

          <stop offset="0%" style="stop-color: transparent; stop-opacity: 0.6" >
            <animate attributeName="stop-opacity" values="0.6;0;0.6" dur="2s" repeatCount="indefinite" />
          </stop>
          
          <stop offset="5%" style="stop-color: black; stop-opacity: 1" />
          <stop offset="15%" style="stop-color: black; stop-opacity: 1" />

          <stop offset="20%" style="stop-color: transparent; stop-opacity: 0.6" >
            <animate attributeName="stop-opacity" values="0.6;0;0.6" dur="2s" repeatCount="indefinite" />
          </stop>

          <stop offset="25%" style="stop-color: black; stop-opacity: 1" />
          <stop offset="35%" style="stop-color: black; stop-opacity: 1" />
          
          <stop offset="40%" style="stop-color: transparent; stop-opacity: 0.6" >
            <animate attributeName="stop-opacity" values="0.6;0;0.6" dur="2s" repeatCount="indefinite" />
          </stop>
          
          <stop offset="45%" style="stop-color: black; stop-opacity: 1" />
          <stop offset="50%" style="stop-color: black; stop-opacity: 1" />
          
          <stop offset="55%" style="stop-color: transparent; stop-opacity: 0.6" >
            <animate attributeName="stop-opacity" values="0.6;0;0.6" dur="2s" repeatCount="indefinite" />
          </stop>
          
          <stop offset="60%" style="stop-color: black; stop-opacity: 1" />
          <stop offset="70%" style="stop-color: black; stop-opacity: 1" />

          <stop offset="75%" style="stop-color: transparent; stop-opacity: 0.6" >
            <animate attributeName="stop-opacity" values="0.6;0;0.6" dur="2s" repeatCount="indefinite" />
          </stop>
          
          <stop offset="80%" style="stop-color: black; stop-opacity: 1" />
          <stop offset="90%" style="stop-color: black; stop-opacity: 1" />

          <stop offset="95%" style="stop-color: transparent; stop-opacity: 0.6" >
            <animate attributeName="stop-opacity" values="0.6;0;0.6" dur="2s" repeatCount="indefinite" />
          </stop>
          
          <animate attributeName="y2" values="200%; 100%; 200%;" dur="2s" repeatCount="indefinite" />
        </linearGradient>
        
        <linearGradient id="myVerticalGradient" x1="0%" y1="0%" x2="100%" y2="0%" >
          
          <stop offset="0%" style="stop-color: blue;" />
          <stop offset="15%" style="stop-color: cyan;" />
          <stop offset="30%" style="stop-color: green;" />
          <stop offset="45%" style="stop-color: yellow;" />
          <stop offset="60%" style="stop-color: orange;" />
          <stop offset="75%" style="stop-color: red;" />
          <stop offset="90%" style="stop-color: purple;" />
          <stop offset="100%" style="stop-color: indigo;" />
          <animate attributeName="x1" values="-200%;0%; -200%" dur="5s" repeatCount="indefinite" />
          <animate attributeName="x2" values="210%;100%; 210%" dur="5s" repeatCount="indefinite" />
        </linearGradient>
        
        <radialGradient id="myStrokeGradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
          <stop offset="0%" style="stop-color: transparent; stop-opacity: 1" />
          <stop offset="60%" style="stop-color: white; stop-opacity: 1">
            <animate attributeName="stop-color" values="white;yellow;white" dur="2s" repeatCount="indefinite" />
          </stop>
          <stop offset="70%" style="stop-color: white; stop-opacity: 0.9">
            <animate attributeName="stop-opacity" values="0.9;0.8;0.9" dur="2s" repeatCount="indefinite" />
          </stop>
          <stop offset="85%" style="stop-color: white; stop-opacity: 0.8">
            <animate attributeName="stop-opacity" values="0.8;0.7;0.8" dur="2s" repeatCount="indefinite" />
          </stop>
          <stop offset="100%" style="stop-color: white; stop-opacity: 0.7">
            <animate attributeName="stop-opacity" values="0.7;0.6;0.7" dur="2s" repeatCount="indefinite" />
          </stop>
          <animate attributeName="r" values="100%;50%;100%" dur="2s" repeatCount="indefinite" />
        </radialGradient>
        
        
      </defs>
    </svg>

    
    <script>
      gsap.registerPlugin(CustomEase)

      transitionShapeID = "#transitionShape"
      firstShapeID = "#firstShape"
      secondShapeID = "#secondShape"
      thirdShapeID = "#thirdShape"
      fourthShapeID = "#fourthShape"
      fifthShapeID = "#fifthShape"
      sixthShapeID = "#sixthShape"
      sixthShapeBaseID = "#sixthShapeBase"
      fifthShapeBaseID = "#fifthShapeBase"
      fourthShapeBaseID = "#fourthShapeBase"
      thirdShapeBaseID = "#thirdShapeBase"
      secondShapeBaseID = "#secondShapeBase"
      firstShapeBaseID = "#firstShapeBase"
      transitionShapeBaseID = "#transitionShapeBase"

      const INITIAL_STATE = { scale: 0, opacity: 1, transformOrigin: "50% 50%" }
      const TRANSITION_IN = { duration: 0.5, scale: 1, ease:  "power4.out"}
      const TRANSITION_SHAPE_IN = {...TRANSITION_IN}
      const TRANSITION_OUT = { duration: 0.75, scale: 0, ease: "power4.in"}
      const TRANSITION_SHAPE_OUT = { scale:0.05, duration: 1, ease: "linear" }

      gsap.set(sixthShapeID, INITIAL_STATE);
      gsap.set(fifthShapeID, INITIAL_STATE);
      gsap.set(fourthShapeID, INITIAL_STATE);
      gsap.set(thirdShapeID, INITIAL_STATE);
      gsap.set(secondShapeID, INITIAL_STATE);
      gsap.set(firstShapeID, INITIAL_STATE);
      gsap.set(transitionShapeID, INITIAL_STATE);

      gsap.set(sixthShapeBaseID, INITIAL_STATE);
      gsap.set(fifthShapeBaseID, INITIAL_STATE);
      gsap.set(fourthShapeBaseID, INITIAL_STATE);
      gsap.set(thirdShapeBaseID, INITIAL_STATE);
      gsap.set(secondShapeBaseID, INITIAL_STATE);
      gsap.set(firstShapeBaseID, INITIAL_STATE);
      gsap.set(transitionShapeBaseID, INITIAL_STATE);
      
      const transitionTargets = [transitionShape, transitionShapeBaseID]
      const firstShapeTargetsIDs = [firstShapeID, firstShapeBaseID]
      const secondShapeTargetsIDs = [secondShapeID, secondShapeBaseID]
      const thirdShapeTargetsIDs = [thirdShapeID, thirdShapeBaseID]
      const fourthShapeTargetsIDs = [fourthShapeID, fourthShapeBaseID]
      const fifthShapeTargetsIDs = [fifthShapeID, fifthShapeBaseID]
      const sixthShapeTargetsIDs = [sixthShapeID, sixthShapeBaseID]
      const tl = gsap.timeline();
      tl.to(transitionTargets, TRANSITION_IN)
      .to(firstShapeTargetsIDs, TRANSITION_IN)
      .to(firstShapeTargetsIDs, TRANSITION_OUT)
      
      .to(secondShapeTargetsIDs, TRANSITION_IN)
      .to(secondShapeTargetsIDs, TRANSITION_OUT)
      
      .to(thirdShapeTargetsIDs, TRANSITION_IN)
      .to(thirdShapeTargetsIDs, TRANSITION_OUT)
      
      .to(fourthShapeTargetsIDs, TRANSITION_IN)
      .to(fourthShapeTargetsIDs, TRANSITION_OUT)
      
      .to(fifthShapeTargetsIDs, TRANSITION_IN)
      .to(fifthShapeTargetsIDs, TRANSITION_OUT)
      
      .to(sixthShapeTargetsIDs, TRANSITION_IN)
      .to(sixthShapeTargetsIDs, TRANSITION_OUT)
      .to(transitionTargets, TRANSITION_SHAPE_OUT)
      .to(transitionTargets, TRANSITION_OUT)

      document.getElementById("play").onclick = function(){
        tl.restart(true);
      }
      
    </script>
</body>
</html>